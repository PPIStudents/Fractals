\hypertarget{util_8h_source}{}\doxysection{util.\+h}
\mbox{\hyperlink{util_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//Автор(с): Кудуштеев\ Алексей}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#if!\ defined(\_UTIL\_KUDUSHTEEV\_H\_)}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ \_UTIL\_KUDUSHTEEV\_H\_}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >\ 1000}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ \ OBJ\_SIZE\ \ \ 4}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keywordtype}{int}\ figure[\mbox{\hyperlink{util_8h_a54a4d3dbd45901e627504e1a4cdbf686}{OBJ\_SIZE}}][\mbox{\hyperlink{util_8h_a54a4d3dbd45901e627504e1a4cdbf686}{OBJ\_SIZE}}];}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structfigure__t_ac24a73ed5ab308876ebb22ad4003cf49}{size}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{int}*\ operator\ []\ (\textcolor{keywordtype}{int}\ i)\{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ figure[i];}
\DoxyCodeLine{00016\ \ \ \ \ \}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}*\ operator\ []\ (\textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ figure[i];}
\DoxyCodeLine{00020\ \ \ \ \ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \}\ \mbox{\hyperlink{structfigure__t}{figure\_t}};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structboom__row}{boom\_row}}\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structboom__row_a4e31844433ad474116ea1bc802d1b9b6}{pos}};}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structboom__row_ac975430c7a8642779eff7e72ab6b2f23}{dir}};}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{structboom__row_ab8d09c370f6b7f800e46c4815dbe75a1}{boom\_row}}(\textcolor{keywordtype}{void})\{\}}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{structboom__row_ae7e02f010bc8aee36ff6907b1ed7f2e9}{boom\_row}}(\textcolor{keywordtype}{int}\ p):\mbox{\hyperlink{structboom__row_a4e31844433ad474116ea1bc802d1b9b6}{pos}}(p),\ \mbox{\hyperlink{structboom__row_ac975430c7a8642779eff7e72ab6b2f23}{dir}}(0)\{\}\ }
\DoxyCodeLine{00030\ \};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//динамический массив-\/блок для POD-\/типов}}
\DoxyCodeLine{00033\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpod__array}{pod\_array}}\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00036\ \ \ \ \ T*\ \ \ \ \ arr;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ cnt;}
\DoxyCodeLine{00038\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classpod__array_ad868ed5c343b59c25dcec71c1801f613}{pod\_array}}(\textcolor{keywordtype}{void}):arr(NULL),\ cnt(0)\{\}}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classpod__array_ab996d48f7d5ab64aeaa536028a0d0584}{pod\_array}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classpod__array}{pod\_array}}\&);}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{classpod__array_a609bcffa13ec365908e6d2a5eb021123}{\string~pod\_array}}()\ \{\ \mbox{\hyperlink{classpod__array_ac73abeb187fd24ffe143878e878f059d}{clear}}();\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classpod__array}{pod\_array}}\&\ \mbox{\hyperlink{classpod__array_ab66a73f4bb686f74e1501bed48d34634}{operator\ =\ }}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classpod__array}{pod\_array}}\&);}
\DoxyCodeLine{00044\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpod__array_a09e6a569b4efa78ba43ec47c892329fd}{setSize}}(\textcolor{keywordtype}{size\_t}\ n)\{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpod__array_ac73abeb187fd24ffe143878e878f059d}{clear}}();}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ arr\ =\ \textcolor{keyword}{reinterpret\_cast<}T*\textcolor{keyword}{>}(\ HeapAlloc(GetProcessHeap(),\ HEAP\_ZERO\_MEMORY,\ (DWORD)n\ *\ \textcolor{keyword}{sizeof}(T))\ );}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(arr\ !=\ NULL)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ cnt\ =\ n;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (arr\ !=\ NULL);}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpod__array_ac73abeb187fd24ffe143878e878f059d}{clear}}(\textcolor{keywordtype}{void})\{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(arr\ !=\ NULL)}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ HeapFree(GetProcessHeap(),\ 0,\ arr);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ arr\ =\ NULL;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ cnt\ =\ 0;}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classpod__array_a2ac03d9f2482f326134a8e0327d52ff7}{getSize}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cnt;}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ T\&\ \mbox{\hyperlink{classpod__array_a25cec7b611d53edf118e8de0b16ec2c2}{operator\ []\ }}(\textcolor{keywordtype}{size\_t}\ i)\{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ arr[i];}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{const}\ T\&\ \mbox{\hyperlink{classpod__array_a25cec7b611d53edf118e8de0b16ec2c2}{operator\ []\ }}(\textcolor{keywordtype}{size\_t}\ i)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ arr[i];}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{comment}{//статический\ массив-\/блок для POD-\/типов}}
\DoxyCodeLine{00076\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{int}\ \_max\_>}
\DoxyCodeLine{00077\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpod__block}{pod\_block}}\ \{}
\DoxyCodeLine{00078\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00079\ \ \ \ \ T\ \ \ arr[\_max\_];}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{int}\ cnt;}
\DoxyCodeLine{00081\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classpod__block_a3bd279469c34e93882f1ac5411e52ebe}{pod\_block}}(\textcolor{keywordtype}{void}):cnt(0)\{\}}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{classpod__block_a8d271a60a371d5ce7ab5edce64f0e66e}{\string~pod\_block}}()\ \{\ \mbox{\hyperlink{classpod__block_a4cf3048c524b3a94d9e3c1c9fd4752d0}{reset}}();\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classpod__block_a2767dfd1cf7e4f6e10228e7a0509f8db}{pod\_block}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classpod__block}{pod\_block}}\&);}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classpod__block}{pod\_block}}\&\ \mbox{\hyperlink{classpod__block_a787028e84778afde35dc9fdf02f7860d}{operator\ =\ }}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classpod__block}{pod\_block}}\&);}
\DoxyCodeLine{00087\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpod__block_aca6c4e69f559bb75f43efedfabd99907}{add}}(\textcolor{keyword}{const}\ T\&\ val)\{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(cnt\ <\ \_max\_)}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ arr[cnt++]\ =\ val;}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpod__block_ac71433f644fa6578c453df844b405b1b}{removeAt}}(\textcolor{keywordtype}{size\_t}\ index)\{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(index\ <\ cnt)\{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ memcpy(\&arr[index],\ \&arr[index\ +\ 1],\ (cnt\ -\/\ (index\ +\ 1))\ *\ \textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/cnt;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpod__block_a4cf3048c524b3a94d9e3c1c9fd4752d0}{reset}}(\textcolor{keywordtype}{void})\{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ cnt\ =\ 0;}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classpod__block_ab6bfb1d977acd3fb71c5e8181f020d03}{getSize}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cnt;}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classpod__block_a368a7083aaea6fcf6d1d8ac0fc9e5532}{getMaxSize}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_max\_;}
\DoxyCodeLine{00111\ \ \ \ \ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ T\&\ \mbox{\hyperlink{classpod__block_a73dd6ffc56174e615b7804ac556caa5b}{operator\ []\ }}(\textcolor{keywordtype}{int}\ i)\{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ arr[i];}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{const}\ T\&\ \mbox{\hyperlink{classpod__block_a73dd6ffc56174e615b7804ac556caa5b}{operator\ []\ }}(\textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ arr[i];}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00124\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a644a5a372f9b18ed4463aff44e371f0c}{swap\_value}}(T\&\ a,\ T\&\ b)\{}
\DoxyCodeLine{00125\ \ \ \ \ T\ t\ =\ a;}
\DoxyCodeLine{00126\ \ \ \ \ a\ =\ b;}
\DoxyCodeLine{00127\ \ \ \ \ b\ =\ t;}
\DoxyCodeLine{00128\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a7f301b7d82e7e878a6d3b4fdc89e409b}{figure\_size}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ figure,\ LPRECT\ prc,\ \textcolor{keywordtype}{int}\ size);}
\DoxyCodeLine{00131\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{util_8h_a96bc79472b0ef10a69525637b77652fd}{field\_remove}}(\textcolor{keywordtype}{int}\ field[][FIELD\_COLS],\ \textcolor{keywordtype}{bool}\ line\_erase\ =\ \textcolor{keyword}{false},\ \mbox{\hyperlink{classpod__block}{pod\_block<boom\_row,\ FIELD\_ROWS>}}*\ booms\ =\ NULL);}
\DoxyCodeLine{00132\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{util_8h_afaf3cf544b4fe82e031ce536fbd42f78}{field\_find\_line}}(\textcolor{keywordtype}{int}\ field[][FIELD\_COLS],\ \textcolor{keywordtype}{int}\&\ last);}
\DoxyCodeLine{00133\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_ae34222375b8a6a2a7d1a129489e2c5ac}{figure\_put\_field}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ figure,\ \textcolor{keywordtype}{int}\ field[][FIELD\_COLS]);}
\DoxyCodeLine{00134\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{util_8h_a4010b92a93fc6239f1cc6cf213f5c425}{is\_move\_horz}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ fg,\ \textcolor{keywordtype}{int}\ field[][FIELD\_COLS],\ \textcolor{keywordtype}{int}\ velocity,\ \textcolor{keywordtype}{bool}\ left);}
\DoxyCodeLine{00135\ \textcolor{keyword}{extern}\ BOOL\ \mbox{\hyperlink{util_8h_ae2af2e4dfced0dbcaf04978c90b2fc1c}{is\_move\_down}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ figure,\ \textcolor{keywordtype}{int}\ step,\ \textcolor{keywordtype}{int}\ field[][FIELD\_COLS]);}
\DoxyCodeLine{00136\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{util_8h_a8bb3704a2eaa84bc97dc1f497eb15217}{figure\_rotate}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ figure,\ \textcolor{keywordtype}{int}\ field[][FIELD\_COLS]);}
\DoxyCodeLine{00137\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a6f0b48cd728baaf5dbf7a80535a96225}{figure\_set}}(\mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ src,\ \textcolor{keywordtype}{int}\ val);}
\DoxyCodeLine{00138\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a8647f99c56b7396f2c858a366936c5bc}{figure\_reverse\_horz}}(\mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ src);}
\DoxyCodeLine{00139\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_aa01b520028a67fd9b09d9ba7b1a3308d}{figure\_reverse\_vert}}(\mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ src);}
\DoxyCodeLine{00140\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a2845e09fef63a9ff3609366417723ffd}{figure\_transponse}}(\mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ dst,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ src);}
\DoxyCodeLine{00141\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{util_8h_a2845e09fef63a9ff3609366417723ffd}{figure\_transponse}}(\mbox{\hyperlink{structfigure__t}{figure\_t}}\&\ src);}
\DoxyCodeLine{00142\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{util_8h_a1f255e45d77b9a134c9d4e83168dbae0}{figures\_load}}(\mbox{\hyperlink{classpod__array}{pod\_array<figure\_t>}}\&\ fgs,\ HINSTANCE\ hinst,\ LPCWSTR\ filename,\ LPCWSTR\ type\ =\ NULL);}
\DoxyCodeLine{00143\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}*\ \textcolor{keyword}{operator}\ \textcolor{keyword}{new}\ (\textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00144\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \ \textcolor{keyword}{operator}\ \textcolor{keyword}{delete}\ (\textcolor{keywordtype}{void}*\ p);}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
